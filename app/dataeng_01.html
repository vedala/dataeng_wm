<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="dataeng_01.css">
        <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
        <script src="endpoints.js"></script>
        <script src="dataeng_01.js"></script>
    </head>
    <body>
        <header>
            <h1>Data Ingest, Load and Analysis</h1>
        </header>
        <main>
            <hr>
            <section>
                <h2>Introduction</h2>
                <p>
                    To find datasets that I could use for my demo data engineering project,
                    I started with a simple Google search and found <a href="https://www.springboard.com/blog/free-public-data-sets-data-science-project/">this</a> blog post among several useful hits.
                </p>
                <p>
                    Of the datasets described in the above blog post, I picked Walmart Recruiting Store Sales data.
                    Some of the reasons for picking this dataset inclulde:
                </p>
                <ol>
                    <li>Retail data, easy to understand domain</li>
                    <li>This data is hosted on Kaggle, ver good description of data is provided by Kaggle</li>
                </ol>
                </p>
                <p>
                    Source data located <a href="https://www.kaggle.com/c/walmart-recruiting-store-sales-forecasting">here</a>.
                </p>
            </section>
            <hr>
            <section>
                <h2>Schema Design</h2>
                <p>
                    A dimensional design with the following dimension and fact tables:
                    - date dimension
                    - sales fact
                    - features fact
                </p>
            </section>
            <hr>
            <section>
                <h2>Data Cleaning</h2>
                <p>
                    Data cleaning requirements are based on the ETL tool used. The process for
                    selecting the ETL tool is described in the next section.
                </p>
                <p>
                    Following cleaning and preparation is done on the data:
                </p>
                <ul>
                    <li>Data dimension CSV file generation</li>
                    <li>Sales fact CSV file generation</li>
                    <li>Features fact CSV file generation</li>
                </ul>
            </section>
            <hr>
            <section>
                <h2>Data Load</h2>
                <p>
                    Stitch is used as ETL tool (<a href="https://www.stitchdata.com/">link</a>).
                </p>
                <p>
                    Stitch is a sync-only provider. Stitch tool does not provide any
                    transform ability.
                </p>
                <p>
                    Why Stitch
                    i) offers free account. The only cloud-based ETL tool I found that offers
                       a free account.
                    ii) Once I started using Stitch, I found the service to be execellent.
                        The free account allows only one destination to be added. This was
                        adequate for my needs.
                </p>
                <p>
                    Data loaded into an AWS RDS PostgreSQL instance.
                </p>
            </section>
            <hr>
            <section>
                <h2>Analysis</h2>
                <p>
                    The following analyses are sample of possible analyses that can be
                    performed on the data.
                </p>
                <p>
                    Analysis buttons kick off ajax calls to AWS Lambda functions.

                    The lambda functions run analysis SQL queries on the postgres
                    database and return the result to the web application.

                    Chartjs for rendering charts
                </p>

                <article>
                    <h3>Analysis 1</h3>
                    <label for="start_year">Start year</label>
                    <br>
                    <input type="number" id="start_year" name="start_year">
                    <br>
                    <br>
                    <label for="end_year">End year</label>
                    <br>
                    <input type="number" id="end_year" name="end_year">
                    <br>
                    <br>
                    <button id="button01" type="button">
                        Show analysis
                    </button>
                    <div class="chart-container-1">
                        <canvas id="chart01"></canvas>
                    </div>
                </article>

                <article>
                    <h3>Analysis 2</h3>
                    <input type="radio" id="all_holidays" name="all_or_pick" value="all_holidays">
                    <label for="all_holidays">All Holidays</label>
                    <br>
                    <input type="radio" id="pick_holidays" name="all_or_pick" value="pick_holidays">
                    <label for="pick_holidays">Pick Holidays</label>
                    <br>

                    <p>Choose which holidays to include in chart:</p>
                    <input type="checkbox" id="superbowl" name="selected_holidays" value="superbowl">
                    <label for="superbowl">Super Bowl</label>
                    <br>
                    <input type="checkbox" id="laborday" name="selected_holidays" value="laborday">
                    <label for="superbowl">Labor Day</label>
                    <br>
                    <input type="checkbox" id="thanksgiving" name="selected_holidays" value="thanksgiving">
                    <label for="superbowl">Thanksgiving</label>
                    <br>
                    <input type="checkbox" id="christmas" name="selected_holidays" value="christmas">
                    <label for="superbowl">Christmas</label>

                    <br>
                    <br>
                    <button id="button02" type="button">
                        Show analysis
                    </button>
                    <br>
                    <div id="analysis02-error">
                    </div>
                    <div class="chart-container-2">
                        <canvas id="chart02"></canvas>
                    </div>
                </article>
                <hr>
            </section>
        </main>
    </body>
</html>
